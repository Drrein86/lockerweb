# 🔐 מערכת ניהול לוקרים חכמים

מערכת מתקדמת לניהול לוקרים חכמים עם ממשק משתמש מודרני וסריקת QR Code. עם תמיכה ב-ESP32 ו-WebSocket.

## ✨ תכונות עיקריות

- 🚚 **ממשק שליחים**: הזנת חבילות עם סריקת QR Code אמיתית
- 👤 **ממשק לקוחות**: מעקב ואיסוף חבילות
- 🔧 **ממשק ניהול**: ניהול לוקרים, תאים וחבילות
- 📱 **עיצוב רספונסיבי**: עובד מושלם על כל המכשירים
- 🔍 **סריקת QR**: סורק QR אמיתי עם מצלמה
- 📧 **הודעות אימייל**: התראות אוטומטיות ללקוחות

## 🛠️ טכנולוגיות

- **Frontend**: Next.js 14, React 18, TypeScript
- **UI**: Tailwind CSS, רכיבים מותאמים אישית
- **QR Scanner**: html5-qrcode
- **Backend**: Next.js API Routes
- **Database**: Mock Data (ניתן להרחיב עם Prisma + MySQL)
- **Email**: Nodemailer
- **Deployment**: Vercel

## 🚀 התקנה והרצה

1. התקן את התלויות:
```bash
npm install
```

2. הגדר את משתני הסביבה:
```env
# הגדרות שרת
PORT=8080
NODE_ENV=production

# הגדרות SSL
USE_SSL=false
SSL_KEY_PATH=/app/ssl/key.pem
SSL_CERT_PATH=/app/ssl/cert.pem

# כתובות ESP32
ESP32_LOCKER1_IP=192.168.0.104
ESP32_LOCKER2_IP=192.168.0.105

# הגדרות נוספות
LOG_LEVEL=info
MONITORING_INTERVAL=60000  # בדיקת סטטוס כל דקה
```

3. הפעל את השרת:
```bash
node locker-hardware-server.js
```

## 📁 מבנה הפרויקט

```
src/
├── app/                 # App Router (Next.js 14)
│   ├── admin/          # ממשק ניהול
│   ├── courier/        # ממשק שליחים
│   ├── customer/       # ממשק לקוחות
│   └── api/           # API Routes
├── components/         # רכיבים משותפים
└── lib/               # ספריות ועזרים
```

## 🎯 דפים עיקריים

- `/` - דף בית עם בחירת תפקיד
- `/courier` - ממשק שליחים להזנת חבילות
- `/customer` - ממשק לקוחות למעקב וביטול
- `/admin` - ממשק ניהול מערכת

## 🔧 תכונות מתקדמות

- **סריקת QR אמיתית** עם גישה למצלמה
- **מערכת Mock** שעובדת ללא דאטבייס
- **תמיכה בפורמטים שונים** של QR Code
- **ממשק מותאם לעברית** עם RTL
- **אנימציות וטרנזישנים** חלקים
- **תמיכה ב-SSL לאבטחת התקשורת**
- **חיבור למכשירי ESP32 דרך WiFi**
- **ניטור מצב הלוקרים בזמן אמת**
- **לוגים מפורטים לניטור המערכת**
- **תמיכה בסימולציה למצב ללא חומרה**

## 📱 שימוש

### עבור שליחים:
1. בחירת גודל חבילה
2. בחירת לוקר ותא
3. סריקת QR של הלקוח
4. הזנת פרטים ידנית (אופציונלי)
5. פתיחת התא וקבלת קוד מעקב

### עבור לקוחות:
1. הזנת קוד מעקב
2. צפייה בפרטי החבילה
3. פתיחת התא לאיסוף

### עבור מנהלים:
1. צפייה בדשבורד
2. ניהול לוקרים ותאים
3. ניהול חבילות וסטטוסים

## 🌐 פרסום ב-Vercel

הפרויקט מוכן לפרסום ב-Vercel:

1. העלה ל-GitHub
2. חבר ל-Vercel
3. פרסם אוטומטית

## 📄 רישיון

הפרויקט נבנה במיוחד למערכת לוקרים חכמים. 

## פריסה ב-Railway

1. וודא שכל הקבצים הנדרשים קיימים:
   - `Dockerfile`
   - `locker-hardware-server.js`
   - `esp32-wifi-integration.js`

2. הגדר את משתני הסביבה ב-Railway:
   - `PORT`
   - `USE_SSL`
   - `ESP32_LOCKER1_IP`
   - `ESP32_LOCKER2_IP`

3. אם נדרש SSL:
   - העלה את קבצי המפתח והתעודה לתיקיית `/app/ssl`
   - הגדר `USE_SSL=true` 