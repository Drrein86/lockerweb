// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Locker {
  id          Int       @id @default(autoincrement())
  location    String    @db.VarChar(255)
  description String?   @db.Text
  cells       Cell[]
  packages    Package[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("lockers")
}

model Cell {
  id          Int       @id @default(autoincrement())
  lockerId    Int       @map("locker_id")
  code        String    @db.VarChar(10) // A1, B2, etc.
  size        String    @db.VarChar(20) // SMALL, MEDIUM, LARGE, WIDE
  isOccupied  Boolean   @default(false) @map("is_occupied")
  locker      Locker    @relation(fields: [lockerId], references: [id])
  packages    Package[]
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("cells")
}

model Package {
  id           Int      @id @default(autoincrement())
  trackingCode String   @unique @map("tracking_code") @db.VarChar(255)
  userName     String   @map("user_name") @db.VarChar(255)
  userEmail    String   @map("user_email") @db.VarChar(255)
  userPhone    String   @map("user_phone") @db.VarChar(20)
  lockerId     Int      @map("locker_id")
  cellId       Int      @map("cell_id")
  size         String   @db.VarChar(20) // SMALL, MEDIUM, LARGE, WIDE
  status       String   @default("WAITING") @db.VarChar(20) // WAITING, COLLECTED
  locker       Locker   @relation(fields: [lockerId], references: [id])
  cell         Cell     @relation(fields: [cellId], references: [id])
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt

  @@map("packages")
} 